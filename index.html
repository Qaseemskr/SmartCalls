<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>SmartCall - Your Connection to the World</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="smartcall-logo.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="loader">
        <div class="spinner"></div>
    </div>

    <button id="themeToggleButton" aria-label="Toggle Theme" onclick="toggleTheme()">
        <i class="fas fa-sun"></i>
    </button>

    <div class="container active-page" id="welcomePage">
    <div class="welcome-copyright">
        &copy; Qaseem and Ibrahim
    </div>
    <img src="smartcall-logo.png" alt="SmartCall Logo" class="auth-logo centered-logo">
    <h1>Welcome to SmartCall!</h1>
    <p>Connect with the world - simple, fast, and secured.</p>
    <button class="btn" onclick="navigate('authPage')">
        Get Started
    </button>
</div>

    <div class="container hidden" id="authPage">
        <!-- Content for authPage -->
        <img src="smartcall-logo.png" alt="SmartCall Logo" class="auth-logo">
        <h2 id="authTitle">Sign In</h2>
        <input type="email" id="authEmail" placeholder="Email" autocomplete="email">
        <input type="password" id="authPassword" placeholder="Password" autocomplete="current-password">
        <button class="btn" onclick="authenticateUser()">
            <i class="fas fa-sign-in-alt"></i> <span id="authButtonText">Sign In</span>
        </button>
        <button class="link-btn" id="toggleAuthBtn" onclick="toggleAuthMode()">
            Need an account? Register
        </button>
        <button class="link-btn" onclick="navigate('resetPasswordPage')">
            Forgot Password?
        </button>
        <button class="link-btn back-btn" onclick="navigate('welcomePage')">
            <i class="fas fa-chevron-left"></i> Back
        </button>
    </div>

    <div class="container hidden" id="resetPasswordPage">
        <!-- Content for resetPasswordPage -->
        <h2>Reset Password</h2>
        <input type="email" id="resetEmail" placeholder="Enter your email" autocomplete="email">
        <button class="btn" onclick="sendPasswordReset()">
            Send Reset Link
        </button>
        <button class="link-btn back-btn" onclick="navigate('authPage')">
            <i class="fas fa-chevron-left"></i> Back to Sign In
        </button>
    </div>

    <div class="container hidden" id="mainPage">
        <!-- Main Application Page -->
        <header class="main-header">
            <h1 class="header-title">SmartCall</h1>
            <div class="header-actions">
                <button class="icon-btn" onclick="navigate('topUpPage')" aria-label="Top Up Credit"><i class="fas fa-wallet"></i></button>
                <button class="icon-btn" onclick="navigate('settingsPage')" aria-label="Settings"><i class="fas fa-cog"></i></button>
                <button class="icon-btn" onclick="navigate('profilePage')" aria-label="Profile"><i class="fas fa-user-circle"></i></button>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('dialPadTab')">Dial Pad</button>
            <button class="tab-btn" onclick="showTab('contactsTab')">Contacts</button>
            <button class="tab-btn" onclick="showTab('historyTab')">History</button>
        </div>

        <div id="dialPadTab" class="tab-content active">
            <div class="dial-pad-container">
                <input type="text" id="dialPadInput" placeholder="Enter number or contact" readonly>
                
                <!-- Dial Pad Grid -->
                <div class="dial-grid">
                    <button class="dial-key" onclick="dialInput('1')">1</button>
                    <button class="dial-key" onclick="dialInput('2')">2</button>
                    <button class="dial-key" onclick="dialInput('3')">3</button>
                    <button class="dial-key" onclick="dialInput('4')">4</button>
                    <button class="dial-key" onclick="dialInput('5')">5</button>
                    <button class="dial-key" onclick="dialInput('6')">6</button>
                    <button class="dial-key" onclick="dialInput('7')">7</button>
                    <button class="dial-key" onclick="dialInput('8')">8</button>
                    <button class="dial-key" onclick="dialInput('9')">9</button>
                    <button class="dial-key" onclick="dialInput('*')">*</button>
                    <button class="dial-key" onclick="dialInput('0')">0</button>
                    <button class="dial-key" onclick="dialInput('#')">#</button>
                </div>
                
                <div class="dial-actions">
                    <!-- ACTION BUTTONS -->
                    <button class="icon-btn action-btn delete-btn" onclick="dialInput('delete')" aria-label="Delete">
                        <i class="fas fa-backspace"></i>
                    </button>
                    <button class="icon-btn action-btn call-btn" onclick="startCall()" aria-label="Call">
                        <i class="fas fa-phone-alt"></i>
                    </button>
                    <button class="icon-btn action-btn message-btn" onclick="navigate('messagesPage')" aria-label="Message">
                        <i class="fas fa-comment"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="contactsTab" class="tab-content hidden">
            <!-- Contacts list will be rendered here -->
            <div id="contactsList" class="scroll-area">
                <p class="placeholder-text">Loading contacts...</p>
            </div>
            <button class="btn mt-4" onclick="navigate('addContactPage')">Add New Contact</button>
        </div>

        <div id="historyTab" class="tab-content hidden">
            <!-- Call History will be rendered here -->
            <div id="callHistoryList" class="scroll-area">
                <p class="placeholder-text">Loading call history...</p>
            </div>
            <button class="link-btn mt-4" onclick="clearRecentCalls()">Clear All History</button>
        </div>
    </div>

    <!-- Other Pages (TopUp, Settings, Profile, etc. - simplified for brevity) -->
    <div class="container hidden" id="topUpPage">
        <!-- ... Top Up Content ... -->
        <h2>Top Up Credit</h2>
        <p>Current Balance: <span id="currentBalance">0</span> units</p>
        <input type="number" id="topUpAmount" placeholder="Amount to Top Up (in units)">
        <button class="btn" onclick="topUpCredit()">Proceed to Payment</button>
        <button class="link-btn back-btn" onclick="navigate('mainPage')"><i class="fas fa-chevron-left"></i> Back</button>
    </div>

    <div class="container hidden" id="callPage">
        <!-- CALL SCREEN -->
        <div class="call-info">
            <i class="fas fa-phone-volume call-icon"></i>
            <h2 id="callContactName">...</h2>
            <p id="callStatus">Connecting...</p>
            <div id="callTimer" class="call-timer">00:00:00</div>
        </div>
        
        <div class="call-controls">
            <button class="call-control-btn" id="muteBtn" onclick="toggleMute()" aria-label="Mute Call"><i class="fas fa-microphone"></i></button>
            <button class="call-control-btn" id="speakerBtn" onclick="toggleSpeaker()" aria-label="Toggle Speaker"><i class="fas fa-volume-up"></i></button>
            <button class="call-control-btn" onclick="dialInput('keypad')" aria-label="Show Keypad"><i class="fas fa-th-large"></i></button>
        </div>
        <!-- CORRECTED: Now calls the new endCall() function -->
        <button class="end-call-btn" onclick="endCall()">End Call</button>
    </div>

    <div id="customAlertDialog">
        <div class="custom-alert-content">
            <p id="customAlertMessage"></p>
            <button class="btn" onclick="hideCustomAlert()">OK</button>
        </div>
    </div>

    <div id="customConfirmDialog">
        <div class="custom-confirm-content">
            <p id="customConfirmMessage"></p>
            <div class="custom-confirm-buttons">
                <button class="btn secondary-btn" id="confirmCancelBtn">Cancel</button>
                <button class="btn" id="confirmOkBtn">OK</button>
            </div>
        </div>
    </div>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
<script src="script.js"></script>

</body>
</html>

